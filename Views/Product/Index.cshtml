@model List<Product>

<h2>Products</h2>
<div>
    <div>
        Lọc sản phẩm
    </div>
    <div id="filter">
        <label for="category">Danh mục:</label>
        <select id="category">
            <option value="all">Tất cả</option>
            <option value="electronics">Điện tử</option>
            <option value="clothing">Quần áo</option>
            <!-- Thêm các danh mục khác nếu cần -->
        </select>

        <label for="priceRange">Khoảng giá:</label>
        <select id="priceRange">
            <option value="all">Tất cả</option>
            <option value="0-50">$0 - $50</option>
            <option value="50-100">$50 - $100</option>
            <!-- Thêm các khoảng giá khác nếu cần -->
        </select>

        <button onclick="filterProducts()">Lọc</button>
    </div>
</div>
<div style="display: flex; flex-wrap: wrap; justify-content: space-between; width: 100%">
    @foreach (var product in Model)
    {
        <div class="product-card" style="margin-top: 20px; padding: 10px; color: black; border: 0.4px solid gray">
            <a href="@Url.Action("ProductDetail", new { id = product.ProductId })"
                style="color: black; text-decoration: none">
                <img src="@product.ProductImg" alt="@product.ProductName" style="width:300px; height: 300px" />
                <div style="display: flex; justify-content: space-between">
                    <h3 style="margin-top: 5px;">@product.ProductName</h3>
                    <p style="font-size: 16px; padding: 10px">Đơn giá: @product.ProductPrice</p>
                </div>
                <p>Mô tả: @product.ProductDes</p>
            </a>
        </div>
    }
</div>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    function filterProducts() {
        var category = $("#category").val();
        var priceRange = $("#priceRange").val();

        // Gửi yêu cầu lọc đến server (có thể sử dụng AJAX)
        $.ajax({
            type: "Post",
            url: "/Products/Filter", // Thay đổi đường dẫn tùy thuộc vào cấu trúc ứng dụng của bạn
            data: { category: category, priceRange: priceRange },
            success: function (data) {
                // Cập nhật danh sách sản phẩm với dữ liệu mới từ server
                $(".product").remove(); // Xóa các sản phẩm hiện tại
                $("#filter").after(data); // Thêm sản phẩm mới từ server
            },
            error: function () {
                alert("Đã xảy ra lỗi khi lọc sản phẩm.");
            }
        });
    }
</script>