@using BTL_Web.Models
@model List<Product>


@{
    ViewData["Title"] = "Home Page";
}

<div style="width: 100%;">
    <div>
        <div style="position: relative ; ">
            <img src="https://static.rdc.moveaws.com/images/hero/default/2021-11/webp/hp-hero-tablet.webp"
                style="width: 100%; height: 400px; " />
            <div
                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;font-size: 55px; color: white ">
                <div style="font-weight: 700;">
                    The #1 site real estate professionals trust
                </div>
                <div style="font-size: 18px; ">
                    <ul style="list-style: none; display: flex;justify-content: space-between;">
                        <li style=";">
                            Buy
                        </li>
                        <li>
                            Rent
                        </li>
                        <li>
                            Sell
                        </li>
                        <li>
                            Pre-approval
                        </li>
                        <li>
                            Just sold
                        </li>
                        <li>
                            Home value
                        </li>
                    </ul>
                </div>

                <div>
                    <input style="height: 50px; border-radius: 20px; font-size: 18px; width: 90%; padding-left: 20px "
                        placeholder=" Tìm kiếm ..." id="search" />
                </div>
            </div>
        </div>

        <div style="font-size: 22px; margin-top: 20px;font-weight: 600 ">
            Sản phẩm tìm kiếm
        </div>
        <div id="sanpham">

        </div>

        <div style="font-size: 22px; margin-top: 20px;font-weight: 600 ">
            Browse homes in Duluth, MN
        </div>
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between; width: 100%">
            @foreach (var product in Model)
            {
                <div class="product-card" style="margin-top: 20px; padding: 10px; color: black; border: 0.4px solid gray">
                    <a href="@Url.Action("ProductDetail", new { id = product.ProductId })"
                        style="color: black; text-decoration: none">
                        <img src="@product.ProductImg" alt="@product.ProductName" style="width:300px; height: 300px" />
                        <div style="display: flex; justify-content: space-between">
                            <h3 style="margin-top: 5px;">@product.ProductName</h3>
                            <p style="font-size: 16px; padding: 10px">Đơn giá: @product.ProductPrice</p>
                        </div>
                        <p>Mô tả: @product.ProductDes</p>
                    </a>
                </div>
            }
        </div>


        <div>
            <div>
                <div style="font-size: 25px;margin-top: 20px">
                    Các mẫu hot
                </div>
                <div style="display: flex; justify-content: center; width: 100%; align-items: center;">
                    <div>
                        <img src="https://sccvietnam.vn/data/upload/image/post/album/bdsdothi4_5b0cbc4aed72f.jpg"
                            style="width: 600px; height: 400px" />
                    </div>
                    <div
                        style="text-align: center; display: flex; flex-direction: column; justify-content: center; width: 100%; align-items: center;">
                        <div style="font-size: 30px;">
                            Custom project
                        </div>
                        <div style="margin-top: 60px;width: 450px; font-weight: 500 ">
                            Tell people more about what you do. Use this space to describe your products or
                            services. Highlight their benefits so they feel compelled to click.
                        </div>
                        <div
                            style="margin-top: 60px; background-color: #00baff; width: 150px;padding: 10px ;color: white ;text-align: center; heigth: 60px">
                            Remodeling
                        </div>
                    </div>
                </div>

            </div>
        </div>

        @* -------------- *@

        <div style="margin-top: 30px;">
            <div>

                <div style="display: flex; justify-content: center; width: 100%; align-items: center;">

                    <div
                        style="text-align: center; display: flex; flex-direction: column; justify-content: center; width: 100%; align-items: center;">
                        <div style="font-size: 30px;">
                            Our projects
                        </div>
                        <div style="margin-top: 60px; width: 450px; font-weight: 500 ">
                            Tell people more about what you do. Use this space to describe your products or
                            services. Highlight their benefits so they feel compelled to click.
                        </div>
                        <div
                            style="margin-top: 60px; background-color: #00baff; width: 150px;padding: 10px ;color: white ;text-align: center; heigth: 60px">
                            Click
                        </div>
                    </div>

                    <div>
                        <img src="https://images.unsplash.com/photo-1556912173-3bb406ef7e77?ixid=MnwyMjUyNTN8MHwxfHNlYXJjaHw0OXx8a2l0Y2hlbiUyMGRpbmluZyUyMGZ1cm5pdHVyZXxlbnwwfHx8fDE2MjIxMDU4Nzk&ixlib=rb-1.2.1&w=1920&h=1280&crop=faces&fit=crop&fm=webp&q=75"
                            style="width: 650px; height: 400px" />
                    </div>
                </div>

            </div>
        </div>


        @* -------------- *@

        <div style="margin-top: 30px;">
            <div>
                <div style="display: flex; justify-content: center; width: 100%; align-items: center;">
                    <div>
                        <img src="https://images.unsplash.com/photo-1542621334-a254cf47733d?ixid=MnwyMjUyNTN8MHwxfHNlYXJjaHwzNHx8am9iJTIwbGlzdGluZ3N8ZW58MHx8fHwxNjI1MTMyMjky&ixlib=rb-1.2.1&w=1920&h=1280&crop=faces&fit=crop&fm=webp&q=75"
                            style="width: 600px; height: 400px" />
                    </div>
                    <div
                        style="text-align: center; display: flex; flex-direction: column; justify-content: center; width: 100%; align-items: center;">
                        <div style="font-size: 30px;">
                            Custom project
                        </div>
                        <div style="margin-top: 60px;width: 450px; font-weight: 500 ">
                            Tell people more about what you do. Use this space to describe your products or
                            services. Highlight their benefits so they feel compelled to click.
                        </div>
                        <div
                            style="margin-top: 60px; background-color: #00baff; width: 150px;padding: 10px ;color: white ;text-align: center; heigth: 60px">
                            Remodeling
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @* ---------- *@

    <div style=" position: relative; width: 100%">
        <div>
            <div
                style="position: absolute; top: 40px; z-index: 10;width: 100%; display: flex; justify-content: center; align-items: center; ">
                <div
                    style="color: white;  background-color: rgba(0, 0, 0, 0.52);width: 80%; height: 450px ; margin-top: 50px ">
                    <div style="line-height: 60px; width: 80%; padding: 40px">
                        <div>
                            Reviews
                        </div>
                        <div>
                            "Add testimonial quotes from actual people who use your products. Their feedback can
                            build
                            trust and help your visitors make up their mind."
                            Mike Smith, companyname.com
                        </div>
                        <div>
                            "Add testimonial quotes from actual people who use your products. Their feedback can
                            build
                            trust and help your visitors make up their mind."
                            Mike Smith, companyname.com
                        </div>
                    </div>
                </div>
            </div>
            <img style="width: 100%;height: 600px; margin-top:30px; position: relative;"
                src="https://images.unsplash.com/photo-1531824475211-72594993ce2a?ixid=MnwyMjUyNTN8MHwxfGFsbHx8fHx8fHx8fDE2MjYyMDczNjA&ixlib=rb-1.2.1&w=1920&h=1280&crop=faces&fit=crop&fm=webp&q=75" />
        </div>
    </div>
</div>

<script>

    var searchInput = document.getElementById("search");
    var array = []


    searchInput.addEventListener("input", function () {
        var searchValue = searchInput.value;
        console.log(searchValue == "");

        if (searchValue != "" && searchValue != null) { // Change || to && for correct condition

            fetch("/Home/Search", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                },
                body: "searchString=" + searchValue
            })
                .then((data) => data.json())
                .then((data) => {
                    console.log({ data });
                    var searchResultsContainer = document.getElementById("sanpham");

                    // Remove previous results
                    while (searchResultsContainer.firstChild) {
                        searchResultsContainer.removeChild(searchResultsContainer.firstChild);
                    }

                    // Display the new results
                    data.data.forEach(result => {
                        var resultItem = document.createElement("div");
                        resultItem.textContent = result.productName;  // Update this line based on your actual result structure
                        searchResultsContainer.appendChild(resultItem);

                        var imgtext = document.createElement("img");
                        imgtext.id = result.productId;
                        imgtext.style.width = '100px'
                        imgtext.src = result.productImg;  // Update this line based on your actual result structure
                        searchResultsContainer.appendChild(imgtext);

                        imgtext.addEventListener('click', () => {
                            console.log(result.productId);
                            // Construct the URL using JavaScript
                            var url = '/Product?id=' + result.productId;

                            // Redirect to the product detail page
                            window.location.href = url;
                        });
                    });
                })
                .catch(err => {
                    console.log(err);
                });
        } else {
            var searchResultsContainer = document.getElementById("sanpham");

            while (searchResultsContainer.firstChild) {
                searchResultsContainer.removeChild(searchResultsContainer.firstChild);
            }
        }

        console.log(array); // Note: You reference 'array' here, make sure it's declared and defined elsewhere in your code.
    });


</script>